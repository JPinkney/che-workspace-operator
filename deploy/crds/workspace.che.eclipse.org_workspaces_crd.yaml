apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: workspaces.workspace.che.eclipse.org
spec:
  additionalPrinterColumns:
  - JSONPath: .status.workspaceId
    name: Id
    type: string
  - JSONPath: .spec.started
    name: Enabled
    type: boolean
  - JSONPath: .status.phase
    name: Status
    type: string
  - JSONPath: .status.ideUrl
    name: Url
    type: string
  group: workspace.che.eclipse.org
  names:
    kind: Workspace
    listKind: WorkspaceList
    plural: workspaces
    singular: workspace
  scope: ""
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: Workspace is the Schema for the workspaces API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'
          type: string
        metadata:
          description: 'Standard object''s metadata. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata'
          type: object
        spec:
          description: Desired state of the workspace
          properties:
            devfile:
              description: 'Workspace Structure defined in the Devfile format syntax.
                For more details see the Che 7 documentation: https://www.eclipse.org/che/docs/che-7/making-a-workspace-portable-using-a-devfile/'
              properties:
                apiVersion:
                  description: Devfile API version
                  type: string
                attributes:
                  description: Devfile attributes, e.g. persistVolumes
                  properties:
                    editorFree:
                      type: boolean
                    persistVolumes:
                      type: boolean
                  type: object
                commands:
                  description: List of workspace-wide commands that can be associated
                    to a given component, in order to run in the related container
                  items:
                    properties:
                      actions:
                        items:
                          properties:
                            command:
                              type: string
                            component:
                              type: string
                            reference:
                              type: string
                            referenceContent:
                              type: string
                            type:
                              type: string
                            workdir:
                              type: string
                          required:
                          - type
                          type: object
                        type: array
                      attributes:
                        additionalProperties:
                          type: string
                        type: object
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  type: array
                components:
                  description: List of components (editor, plugins, containers, ...)
                    that will provide the workspace features
                  items:
                    properties:
                      alias:
                        type: string
                      args:
                        items:
                          type: string
                        type: array
                      command:
                        items:
                          type: string
                        type: array
                      endpoints:
                        items:
                          description: Describes dockerimage component endpoint
                          properties:
                            attributes:
                              additionalProperties:
                                type: string
                              type: object
                            name:
                              type: string
                            port:
                              format: int64
                              type: integer
                          required:
                          - name
                          - port
                          type: object
                        type: array
                      env:
                        items:
                          description: Describes environment variable
                          properties:
                            name:
                              type: string
                            value:
                              type: string
                          required:
                          - name
                          - value
                          type: object
                        type: array
                      id:
                        type: string
                      image:
                        type: string
                      memoryLimit:
                        type: string
                      mountSources:
                        type: boolean
                      reference:
                        type: string
                      referenceContent:
                        type: string
                      selector:
                        additionalProperties:
                          type: string
                        type: object
                      type:
                        type: string
                      volumes:
                        items:
                          description: Describe volume that should be mount to component
                          properties:
                            containerPath:
                              type: string
                            name:
                              type: string
                          required:
                          - containerPath
                          - name
                          type: object
                        type: array
                    required:
                    - type
                    type: object
                  type: array
                metadata:
                  description: Devfile metadata
                  properties:
                    generateName:
                      type: string
                    name:
                      type: string
                  type: object
                projects:
                  description: List of projects that should be imported into the workspace
                  items:
                    properties:
                      name:
                        type: string
                      source:
                        description: Describes the project's source - type and location
                        properties:
                          location:
                            type: string
                          type:
                            type: string
                        required:
                        - location
                        - type
                        type: object
                    required:
                    - name
                    - source
                    type: object
                  type: array
              type: object
            routingClass:
              description: Routing class the defines how the workspace will be exposed
                to the external network
              type: string
            started:
              description: Whether the workspace should be started or stopped
              type: boolean
            template:
              description: Optional DevWorkspaceTemplateSpec to try the controller
                with the new devworkspace structure
              properties:
                commands:
                  description: Predefined, ready-to-use, workspace-related commands
                  items:
                    properties:
                      composite:
                        description: Composite command
                        properties:
                          alias:
                            type: string
                          attributes:
                            additionalProperties:
                              type: string
                            type: object
                          commands:
                            description: The commands that comprise this composite
                              command
                            items:
                              type: string
                            type: array
                          label:
                            type: string
                          parallel:
                            type: boolean
                        type: object
                      custom:
                        description: Custom command
                        properties:
                          alias:
                            type: string
                          attributes:
                            additionalProperties:
                              type: string
                            type: object
                          commandClass:
                            type: string
                          embeddedResource:
                            type: object
                          label:
                            type: string
                        required:
                        - commandClass
                        - embeddedResource
                        type: object
                      exec:
                        description: Exec command
                        properties:
                          alias:
                            type: string
                          attributes:
                            additionalProperties:
                              type: string
                            type: object
                          commandLine:
                            description: The actual command-line string
                            type: string
                          component:
                            description: Describes component to which given action
                              relates
                            type: string
                          label:
                            type: string
                          workdir:
                            description: Working directory where the command should
                              be executed
                            type: string
                        required:
                        - commandLine
                        type: object
                      type:
                        description: Type of workspace command
                        enum:
                        - Exec
                        - VscodeTask
                        - VscodeLaunch
                        - Custom
                        type: string
                      vscodeLaunch:
                        description: VscodeLaunch command
                        properties:
                          alias:
                            type: string
                          attributes:
                            additionalProperties:
                              type: string
                            type: object
                          inlined:
                            description: Embedded content of the vscode configuration
                              file
                            type: string
                          locationType:
                            description: Type of Vscode configuration command location
                            type: string
                          url:
                            description: Location as an absolute of relative URL
                            type: string
                        type: object
                      vscodeTask:
                        description: VscodeTask command
                        properties:
                          alias:
                            type: string
                          attributes:
                            additionalProperties:
                              type: string
                            type: object
                          inlined:
                            description: Embedded content of the vscode configuration
                              file
                            type: string
                          locationType:
                            description: Type of Vscode configuration command location
                            type: string
                          url:
                            description: Location as an absolute of relative URL
                            type: string
                        type: object
                    type: object
                  type: array
                components:
                  description: List of the workspace components, such as editor and
                    plugins, user-provided containers, or other types of components
                  items:
                    properties:
                      cheEditor:
                        description: CheEditor component
                        properties:
                          alias:
                            type: string
                          locationType:
                            description: Type of plugin location
                            enum:
                            - RegistryEntry
                            - Uri
                            type: string
                          memoryLimit:
                            type: string
                          registryEntry:
                            description: Location of an entry inside a plugin registry
                            properties:
                              baseUrl:
                                type: string
                              id:
                                type: string
                            required:
                            - id
                            type: object
                          uri:
                            description: Location defined as an URI
                            type: string
                        type: object
                      chePlugin:
                        description: ChePlugin component
                        properties:
                          alias:
                            type: string
                          locationType:
                            description: Type of plugin location
                            enum:
                            - RegistryEntry
                            - Uri
                            type: string
                          memoryLimit:
                            type: string
                          registryEntry:
                            description: Location of an entry inside a plugin registry
                            properties:
                              baseUrl:
                                type: string
                              id:
                                type: string
                            required:
                            - id
                            type: object
                          uri:
                            description: Location defined as an URI
                            type: string
                        type: object
                      container:
                        description: Container component
                        properties:
                          alias:
                            type: string
                          endpoints:
                            items:
                              properties:
                                attributes:
                                  additionalProperties:
                                    type: string
                                  type: object
                                configuration:
                                  properties:
                                    cookiesAuthEnabled:
                                      type: boolean
                                    discoverable:
                                      type: boolean
                                    path:
                                      type: string
                                    protocol:
                                      type: string
                                    public:
                                      type: boolean
                                    scheme:
                                      type: string
                                    secure:
                                      type: boolean
                                    type:
                                      enum:
                                      - ide
                                      - terminal
                                      - ide-dev
                                      type: string
                                  type: object
                                name:
                                  type: string
                                targetPort:
                                  type: integer
                              required:
                              - configuration
                              - name
                              - targetPort
                              type: object
                            type: array
                          env:
                            items:
                              properties:
                                name:
                                  type: string
                                value:
                                  type: string
                              required:
                              - name
                              - value
                              type: object
                            type: array
                          image:
                            type: string
                          memoryLimit:
                            type: string
                          mountSources:
                            type: boolean
                          name:
                            type: string
                          volumes:
                            items:
                              description: Volume that should be mounted to a component
                                container
                              properties:
                                mountPath:
                                  type: string
                                name:
                                  description: The volume name. If several components
                                    mount the same volume then they will reuse the
                                    volume and will be able to access to the same
                                    files
                                  type: string
                              required:
                              - mountPath
                              - name
                              type: object
                            type: array
                        required:
                        - image
                        - name
                        type: object
                      custom:
                        description: Custom component
                        properties:
                          componentClass:
                            type: string
                          embeddedResource:
                            type: object
                          name:
                            type: string
                        required:
                        - componentClass
                        - embeddedResource
                        - name
                        type: object
                      kubernetes:
                        description: Kubernetes component
                        properties:
                          alias:
                            type: string
                          inlined:
                            description: Reference to the plugin definition
                            type: string
                          locationType:
                            description: Type of Kubernetes-like location
                            type: string
                          url:
                            description: Location in a plugin registry
                            type: string
                        type: object
                      openshift:
                        description: Openshift component
                        properties:
                          alias:
                            type: string
                          inlined:
                            description: Reference to the plugin definition
                            type: string
                          locationType:
                            description: Type of Kubernetes-like location
                            type: string
                          url:
                            description: Location in a plugin registry
                            type: string
                        type: object
                      type:
                        description: Type of project source
                        enum:
                        - Container
                        - Kubernetes
                        - Openshift
                        - CheEditor
                        - ChePlugin
                        - Custom
                        type: string
                    type: object
                  type: array
                parent:
                  description: Parent workspace template
                  properties:
                    kubernetes:
                      description: Reference to a Kubernetes CRD of type DevWorkspaceTemplate
                      properties:
                        name:
                          type: string
                        namespace:
                          type: string
                      required:
                      - name
                      type: object
                    locationType:
                      description: Type of parent location
                      enum:
                      - Uri
                      - RegistryEntry
                      - Kubernetes
                      type: string
                    registryEntry:
                      description: Entry in a registry (base URL + ID) that contains
                        a Devfile yaml file
                      properties:
                        baseUrl:
                          type: string
                        id:
                          type: string
                      required:
                      - id
                      type: object
                    uri:
                      description: Uri of a Devfile yaml file
                      type: string
                  type: object
                projects:
                  description: Projects worked on in the workspace, containing names
                    and sources locations
                  items:
                    properties:
                      clonePath:
                        description: Path relative to the root of the projects to
                          which this project should be cloned into. This is a unix-style
                          relative path (i.e. uses forward slashes). The path is invalid
                          if it is absolute or tries to escape the project root through
                          the usage of '..'. If not specified, defaults to the project
                          name.
                        type: string
                      custom:
                        description: Project's Custom source
                        properties:
                          embeddedResource:
                            type: object
                          projectSourceClass:
                            type: string
                        required:
                        - embeddedResource
                        - projectSourceClass
                        type: object
                      git:
                        description: Project's Git source
                        properties:
                          branch:
                            description: The branch to check
                            type: string
                          location:
                            description: Project's source location address. Should
                              be URL for git and github located projects, or; file://
                              for zip
                            type: string
                          sparseCheckoutDir:
                            description: Part of project to populate in the working
                              directory.
                            type: string
                          startPoint:
                            description: The tag or commit id to reset the checked
                              out branch to
                            type: string
                        required:
                        - location
                        type: object
                      github:
                        description: Project's GitHub source
                        properties:
                          branch:
                            description: The branch to check
                            type: string
                          location:
                            description: Project's source location address. Should
                              be URL for git and github located projects, or; file://
                              for zip
                            type: string
                          sparseCheckoutDir:
                            description: Part of project to populate in the working
                              directory.
                            type: string
                          startPoint:
                            description: The tag or commit id to reset the checked
                              out branch to
                            type: string
                        required:
                        - location
                        type: object
                      name:
                        description: Project name
                        type: string
                      sourceType:
                        description: Type of project source
                        enum:
                        - Git
                        - Github
                        - Zip
                        - Custom
                        type: string
                      zip:
                        description: Project's Zip source
                        properties:
                          location:
                            description: Project's source location address. Should
                              be URL for git and github located projects, or; file://
                              for zip
                            type: string
                          sparseCheckoutDir:
                            description: Part of project to populate in the working
                              directory.
                            type: string
                        required:
                        - location
                        type: object
                    required:
                    - name
                    type: object
                  type: array
              type: object
          required:
          - started
          type: object
        status:
          description: Observed state of the workspace
          properties:
            additionalFields:
              additionalProperties:
                type: string
              description: AdditionalInfo
              type: object
            conditions:
              description: Condition keeps track of all cluster conditions, if they
                exist.
              items:
                description: WorkspaceCondition contains details for the current condition
                  of this workspace.
                properties:
                  lastTransitionTime:
                    description: Last time the condition transitioned from one status
                      to another.
                    format: date-time
                    type: string
                  message:
                    description: Human-readable message indicating details about last
                      transition.
                    type: string
                  reason:
                    description: Unique, one-word, CamelCase reason for the condition's
                      last transition.
                    type: string
                  status:
                    description: Status is the status of the condition. Can be True,
                      False, Unknown.
                    type: string
                  type:
                    description: Type is the type of the condition.
                    type: string
                required:
                - status
                - type
                type: object
              type: array
            ideUrl:
              description: URL at which the Editor can be joined
              type: string
            members:
              description: Members are the Workspace pods
              properties:
                ready:
                  description: Ready are the workspace Pods that are ready The member
                    names are based on the workspace pod deployment names
                  items:
                    type: string
                  type: array
                unready:
                  description: Unready are the workspace Pods that are not ready to
                    serve requests
                  items:
                    type: string
                  type: array
              type: object
            phase:
              description: Workspace status
              type: string
            workspaceId:
              description: Id of the workspace
              type: string
          required:
          - members
          - phase
          - workspaceId
          type: object
      type: object
  version: v1alpha1
  versions:
  - name: v1alpha1
    served: true
    storage: true
